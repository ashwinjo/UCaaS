{
  "profiles": {
    "layer_1_profiles": [
      {
        "name": "ixload_config",
        "link_speed": "speed_100_gbps",
        "choice": "autonegotiation"
      },
      {
        "name": "ixnetwork_config",
        "link_speed": "speed_100_gbps",
        "choice": "autonegotiation"
      },
      {
        "name": "dut_config",
        "link_speed": "speed_100_gbps",
        "choice": "manual",
        "manual": {
          "fec_mode": "none"
        }
      }
    ]
  },
  "front_panel_ports": [
    {
      "name": "ixload_client_ports",
      "choice": "port_group",
      "port_group": {
        "ports": [
          {
            "front_panel_port": 1,
            "layer_1_profile_name": "ixload_config"
          },
          {
            "front_panel_port": 2,
            "layer_1_profile_name": "ixload_config"
          }
        ]
      }
    },
    {
      "name": "ixload_server_ports",
      "choice": "port_group",
      "port_group": {
        "ingress_distribution": "copy",
        "ports": [
          {
            "front_panel_port": 3,
            "layer_1_profile_name": "ixload_config"
          },
          {
            "front_panel_port": 4,
            "layer_1_profile_name": "ixload_config"
          }
        ]
      }
    },
    {
      "name": "dut_port_group_1",
      "choice": "port_group",
      "port_group":
      {        
        "ports": [
          {
            "front_panel_port": 5,
            "layer_1_profile_name": "dut_config"
          },
          {
            "front_panel_port": 6,
            "layer_1_profile_name": "dut_config"
          }
        ]
      }
    },
    {
      "name": "dut_port_group_2",
      "choice": "port_group",
      "port_group":
      {
        "ingress_distribution": "copy",
        "ports": [
          {
            "front_panel_port": 7,
            "layer_1_profile_name": "dut_config"
          },
          {
            "front_panel_port": 8,
            "layer_1_profile_name": "dut_config"
          }
        ]
      }
    }
  ],
  "connections": [
    {
      "name": "IxLoad VLAN to DUT NVGRE 1",
      "functions": [
        { 
          "choice": "connect_vlan_nvgre",
          "connect_vlan_nvgre": {
            "nvgre_endpoint_settings":{
              "vsid": {
                "choice": "vsid_range",
                "vsid_range":  {
                  "start": 11
                }
              },
              "protocols": {
                "reject": [
                    "udp", "bgp", "icmp"
                ]
              }
            },
            "vlan_endpoint_settings": {
              "outgoing_nvgre_header": {
                "src_mac": {
                  "choice": "mac",
                  "mac": "01:02:03:04:05:01"
                },
                "src_ip": {
                  "choice": "ipv4_range",
                  "ipv4_range":  {
                    "start": "221.0.1.0"
                  }
                },
                "dst_mac": {
                  "choice": "mac",
                  "mac": "00:ae:cd:11:36:ce"
                },
                "dst_ip": {
                  "choice": "ipv4",
                  "ipv4": "221.0.0.1"
                },
                "flow_id": 85
              }
            }
          }
        }
      ],
      "endpoints": [
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "ixload_client_ports",
            "vlan": {
              "choice": "vlan_range",
              "vlan_range":   {
                "start": 1,
                "count": 3
              }
            }
          },
          "tags": ["vlan"]
        },
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "dut_port_group_1"
          },
          "tags": ["nvgre"]
        }
      ]
    },
    {
      "name": "IxLoad VLAN to DUT NVGRE 2",
      "functions": [
        {
          "choice": "connect_vlan_nvgre",
          "connect_vlan_nvgre": {
            "nvgre_endpoint_settings": {
              "vsid": {
                "choice": "vsid_range",
                "vsid_range":  {
                  "start": 14
                }
              },
              "protocols": {
                "reject": [
                    "udp", "bgp", "icmp"
                ]
              }
            },
            "vlan_endpoint_settings": {
              "outgoing_nvgre_header": {
                "src_mac": {
                  "choice": "mac",
                  "mac": "01:02:03:04:05:02"
                },
                "src_ip": {
                  "choice": "ipv4_range",
                  "ipv4_range":  {
                    "start": "221.0.2.0"
                  }
                },
                "dst_mac": {
                  "choice": "mac",
                  "mac": "00:ae:cd:11:36:ce"
                },
                "dst_ip": {
                  "choice": "ipv4",
                  "ipv4": "221.0.0.2"
                },
                "flow_id": 85
              }
            }
          }    
        }
      ],
      "endpoints": [
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "ixload_server_ports",
            "vlan": {
              "choice": "vlan_range",
              "vlan_range":   {
                "start": 4,
                "count": 3
              }
            }
          },
          "tags": ["vlan"]
        },
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "dut_port_group_2"
          },
          "tags": ["nvgre"]
        }
      ]
    }
  ]
}
