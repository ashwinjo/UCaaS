{
  "profiles": {
    "layer_1_profiles": [
      {
        "name": "ixload_config",
        "link_speed": "speed_100_gbps",
        "choice": "autonegotiation"
      },
      {
        "name": "ixnetwork_config",
        "link_speed": "speed_100_gbps",
        "choice": "autonegotiation"
      },
      {
        "name": "dut_config",
        "link_speed": "speed_100_gbps",
        "choice": "manual",
        "manual": {
          "fec_mode": "none"
        }
      }
    ]
  },
  "front_panel_ports": [
    {
      "name": "ixload_client_ports",
      "choice": "port_group",
      "port_group": {
        "ports": [
          {
            "front_panel_port": 1,
            "channel": 3,
            "layer_1_profile_name": "ixload_config"
          }
        ]
      }
    },
    {
      "name": "ixload_server_ports",
      "choice": "port_group",
      "port_group": {
        "ports": [
          {
            "front_panel_port": 2,
            "channel": 7,
            "layer_1_profile_name": "ixload_config"
          }
        ]
      }
    },
    {
      "name": "ixnetwork_client_ports",
      "choice": "front_panel_port",
      "front_panel_port": {
        "front_panel_port": 3,
        "layer_1_profile_name": "ixnetwork_config"
      }
    },
    {
      "name": "ixnetwork_server_ports",
      "choice": "front_panel_port",
      "front_panel_port": {
        "front_panel_port": 4,
        "layer_1_profile_name": "ixnetwork_config"
      }
    },
    {
      "name": "dut_port_group_1",
      "choice": "front_panel_port",
      "front_panel_port": {
        "front_panel_port": 5,
        "layer_1_profile_name": "dut_config"
      }
    },
    {
      "name": "dut_port_group_2",
      "choice": "front_panel_port",
      "front_panel_port": {
        "front_panel_port": 6,
        "layer_1_profile_name": "dut_config"
      }
    }
  ],
  "connections": [
    {
      "name": "IxLoad ARP Bypass",
      "functions": [
        { 
          "choice": "connect_arp",
          "connect_arp": {}
        }
      ],
      "endpoints": [
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "ixload_client_ports",
            "vlan": {
              "choice": "vlan_range",
              "vlan_range":   {
                "start": 1,
                "count": 30,
                "step": 2
              }
            }
          }
        },
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "ixload_server_ports",
            "vlan": {
              "choice": "vlan_range",
              "vlan_range":   {
                "start": 2,
                "count": 30,
                "step": 2
              }
            }
          }
        }
      ]
    },
    {
      "name": "IxLoad VLAN to DUT VXLAN 1",
      "functions": [
        { 
          "choice": "connect_vlan_vxlan",
          "connect_vlan_vxlan": {
            "vxlan_endpoint_settings":{
              "vni": {
                "choice": "vni_range",
                "vni_range":  {
                  "start": 101
                }
              },
              "protocols": {
                "reject": [
                    "udp", "bgp", "icmp"
                ]
              }
            },
            "vlan_endpoint_settings": {
              "outgoing_vxlan_header": {
                "src_mac": {
                  "choice": "mac",
                  "mac": "01:02:03:04:05:01"
                },
                "src_ip": {
                  "choice": "ipv4_range",
                  "ipv4_range":  {
                    "start": "221.0.1.0"
                  }
                },
                "dst_mac": {
                  "choice": "mac",
                  "mac": "00:ae:cd:11:36:ce"
                },
                "dst_ip": {
                  "choice": "ipv4",
                  "ipv4": "221.0.0.2"
                }
              }
            }
          }
        }
      ],
      "endpoints": [
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "ixload_client_ports",
            "vlan": {
              "choice": "vlan_range",
              "vlan_range":   {
                "start": 1,
                "count": 30
              }
            }
          },
          "tags": ["vlan"]
        },
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "dut_port_group_1"
          },
          "tags": ["vxlan"]
        }
      ]
    },
    {
      "name": "IxLoad VLAN to DUT VXLAN 2",
      "functions": [
        {
          "choice": "connect_vlan_vxlan",
          "connect_vlan_vxlan": {
            "vxlan_endpoint_settings": {
              "vni": {
                "choice": "vni_range",
                "vni_range":  {
                  "start": 101
                }
              },
              "protocols": {
                "reject": [
                    "udp", "bgp", "icmp"
                ]
              }
            },
            "vlan_endpoint_settings": {
              "outgoing_vxlan_header": {
                "src_mac": {
                  "choice": "mac",
                  "mac": "01:02:03:04:05:02"
                },
                "src_ip": {
                  "choice": "ipv4_range",
                  "ipv4_range":  {
                    "start": "221.0.2.0"
                  }
                },
                "dst_mac": {
                  "choice": "mac",
                  "mac": "00:ae:cd:11:36:ce"
                },
                "dst_ip": {
                  "choice": "ipv4",
                  "ipv4": "221.0.0.2"
                }
              }
            }
          }    
        }
      ],
      "endpoints": [
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "ixload_server_ports",
            "vlan": {
              "choice": "vlan_range",
              "vlan_range":   {
                "start": 1,
                "count": 30
              }
            }
          },
          "tags": ["vlan"]
        },
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "dut_port_group_2"
          },
          "tags": ["vxlan"]
        }
      ]
    },
    {
      "name": "IxNetwork VLAN to DUT VXLAN 1",
      "functions": [
        { 
          "choice": "connect_vlan_vxlan",
          "connect_vlan_vxlan": {
            "vxlan_endpoint_settings": {
              "vni": {
                "choice": "vni_range",
                "vni_range":  {
                  "start": 1
                }
              },
              "protocols": {
                "accept": [
                    "udp", "bgp", "icmp"
                ]
              }
            },
            "vlan_endpoint_settings": {
              "outgoing_vxlan_header": {
                "src_mac": {
                  "choice": "mac",
                  "mac":  "01:02:03:00:00:01"
                },
                "src_ip": {
                  "choice": "ipv4_range",
                  "ipv4_range":  {
                    "start": "221.0.1.0"
                  }
                },
                "dst_mac": {
                  "choice": "mac",
                  "mac": "00:ae:cd:11:36:ce"
                },
                "dst_ip": {
                  "choice": "ipv4",
                  "ipv4": "221.0.0.2"
                }
              }
            }
          }  
        }
      ],
      "endpoints": [
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "ixnetwork_client_ports",
            "vlan": {
              "choice": "vlan_range",
              "vlan_range":   {
                "start": 2,
                "count": 30,
                "step": 2
              }
            }
          },
          "tags": ["vlan"]
        },
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "dut_port_group_1"
          },
          "tags": ["vxlan"]
        }
      ]
    },
    {
      "name": "IxNetwork VLAN to DUT VXLAN 2",
      "functions": [
        {
          "choice": "connect_vlan_vxlan",
          "connect_vlan_vxlan": {
            "vxlan_endpoint_settings": {
              "vni": {
                "choice": "vni_range",
                "vni_range":  {
                  "start": 101
                }
              },
              "protocols": {
                "accept": [
                    "udp", "bgp", "icmp"
                ]
              }
            },
            "vlan_endpoint_settings": {
              "outgoing_vxlan_header": {
                "src_mac": {
                  "choice": "mac",
                  "mac": "01:02:03:00:00:02"
                },
                "src_ip": {
                  "choice": "ipv4_range",
                  "ipv4_range":  {
                    "start": "221.0.2.0"
                  }
                },
                "dst_mac": {
                  "choice": "mac",
                  "mac": "00:ae:cd:11:36:ce"
                },
                "dst_ip": {
                  "choice": "ipv4",
                  "ipv4": "221.0.0.2"
                }
              }
            }
          }    
        }
      ],
      "endpoints": [
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "ixnetwork_server_ports",
            "vlan": {
              "choice": "vlan_range",
              "vlan_range":   {
                "start": 2,
                "count": 30,
                "step": 2
              }
            }
          },
          "tags": ["vlan"]
        },
        {
          "choice": "front_panel",
          "front_panel": {
            "port_name": "dut_port_group_2"
          },
          "tags": ["vxlan"]
        }
      ]
    }
  ]
}
